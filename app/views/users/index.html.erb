<div style="background-color: rgba(255, 255, 255, 0.8); padding: 20px;">
  <h1 class="text-center mt-4">Users</h1>


<div style="background-color: rgba(255, 255, 255, 0.8); padding: 20px;"> 
  <%= will_paginate @users, :container => false %>
</div>


  <table class="table">
    <thead>
      <tr>
        <th style="padding-right: 20px;">Photo</th>
        <th style="padding-right: 20px;">Name</th>
        <th style="padding-right: 20px;">Playlists</th>
        <th style="padding-right: 20px;">Actions</th>
        <th>Joined</th>
                <% if current_user.admin? %>
        <th style="padding-right: 20px;">Device</th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @users.each do |user| %>
        <tr>
        <td style="padding-right: 20px;"><%= link_to gravatar_for(user, size: 30), user %></td>
        <td style="padding-right: 20px;"><%= link_to user.username, user %></td>
        <td style="padding-right: 20px;"><%= pluralize(user.playlists.count, "playlist") %></td>
        <td style="padding-right: 20px;">
        <div class="actions">
          <div class="button-container" style="display: flex; gap: 5px;">
            <%= button_to 'Show', user_path(user), method: :get %>
            <% if logged_in? %>
              <% if user == current_user %>
                <%= button_to 'Edit', edit_user_path(user), method: :get %>
              <% end %>
              <% if current_user.admin? %>
                <%= button_to 'Delete', user_path(user), method: :delete, onclick: "return confirm('Are you sure you want to delete this user?');" %>
              <% end %>
            <% end %>
          </div>
        </div>
      <td><small>Joined <%= time_ago_in_words(user.created_at) %> ago</small></td>
      <% if current_user.admin? %>
        <td>
          <% user.devices.each do |device| %>
            <%= device.name %><br>
          <% end %>
        </td>
      <% end %>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>


<div style="background-color: rgba(255, 255, 255, 0.8); padding: 20px;"> 
  <%= will_paginate @users, :container => false %>
</div>
